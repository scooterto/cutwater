<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cutwater | Asset Pool Metrics</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Source+Serif+4:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --navy-primary: #1a2b5f;
            --navy-light: #2c4a8c;
            --blue-accent: #5BA4E6;
            --success: #2D8A5F;
            --bg-primary: #FFFFFF;
            --bg-secondary: #f8f9fa;
            --text-primary: #1a2b5f;
            --text-secondary: #5a6577;
            --border-color: #e8eaed;
            --font-display: 'Playfair Display', Georgia, serif;
            --font-body: 'Source Serif 4', Georgia, serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 40px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            font-family: var(--font-display);
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 32px;
        }

        .stats-row {
            display: flex;
            gap: 24px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--navy-primary);
            color: white;
            border-radius: 8px;
            padding: 20px 32px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: rgba(255,255,255,0.7);
            margin-bottom: 4px;
        }

        .stat-value {
            font-family: var(--font-display);
            font-size: 2rem;
            font-weight: 600;
        }

        .assets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 16px;
            margin-bottom: 40px;
        }

        .asset-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            text-align: center;
            transition: all 0.2s ease;
        }

        .asset-card:hover {
            border-color: var(--navy-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(26, 43, 95, 0.1);
        }

        .asset-symbol {
            font-family: var(--font-display);
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--navy-primary);
        }

        .table-container {
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .table-header h2 {
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 600;
        }

        .table-scroll {
            max-height: 500px;
            overflow-y: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            position: sticky;
            top: 0;
            background: var(--bg-primary);
            z-index: 10;
        }

        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.9rem;
        }

        th {
            font-weight: 600;
            color: var(--text-secondary);
            background: var(--bg-secondary);
        }

        th:first-child, td:first-child {
            padding-left: 24px;
        }

        th:last-child, td:last-child {
            padding-right: 24px;
        }

        tr:hover {
            background: var(--bg-secondary);
        }

        .asset-index {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .category-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .category-l1 { background: rgba(91, 164, 230, 0.15); color: #2c6cb0; }
        .category-defi { background: rgba(45, 138, 95, 0.15); color: #1d6b4a; }
        .category-meme { background: rgba(201, 162, 39, 0.15); color: #8a7020; }
        .category-gaming { background: rgba(156, 39, 176, 0.15); color: #7b1fa2; }
        .category-infra { background: rgba(255, 87, 34, 0.15); color: #d84315; }

        .positive { color: var(--success); }
        .negative { color: #dc3545; }

        .top-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-bottom: 40px;
        }

        .chart-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
        }

        .chart-section h2 {
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .chart-container {
            position: relative;
            height: 320px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .allocation-legend {
            margin-top: 16px;
        }

        .legend-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .legend-item:last-child {
            border-bottom: none;
        }

        .legend-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        .legend-symbol {
            font-weight: 600;
        }

        .legend-apr {
            color: var(--success);
            font-size: 0.9rem;
        }

        .legend-amount {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .total-assets-display {
            text-align: center;
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .total-assets-display strong {
            color: var(--navy-primary);
            font-size: 1.1rem;
        }

        .legend-pct {
            font-weight: 600;
            color: var(--text-secondary);
        }

        .assets-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
        }

        .assets-section h2 {
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .assets-grid-small {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
        }

        .asset-card-small {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 8px 4px;
            text-align: center;
            transition: all 0.2s ease;
        }

        .asset-card-small:hover {
            border-color: var(--navy-primary);
            transform: translateY(-1px);
        }

        .asset-symbol-small {
            font-family: var(--font-display);
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--navy-primary);
        }

        @media (max-width: 768px) {
            body { padding: 20px; }
            h1 { font-size: 1.8rem; }
            .top-section { grid-template-columns: 1fr; }
            .assets-grid-small { grid-template-columns: repeat(4, 1fr); }
            .stats-row { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Asset Pool Metrics</h1>
        <p class="subtitle">Perpetual futures assets in the Cutwater trading pool</p>

        <div class="top-section">
            <!-- Current Asset Pool -->
            <div class="chart-section">
                <h2>Current Asset Pool</h2>
                <div class="total-assets-display">Total: <strong>$7,400,056</strong></div>
                <div class="chart-container">
                    <canvas id="currentChart"></canvas>
                </div>
                <div class="allocation-legend">
                    <div class="legend-item">
                        <div class="legend-left">
                            <div class="legend-color" style="background: #9945FF;"></div>
                            <span class="legend-symbol">SOL</span>
                            <span class="legend-amount">$4,619,061</span>
                        </div>
                        <span class="legend-pct">62.4%</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-left">
                            <div class="legend-color" style="background: #F7931A;"></div>
                            <span class="legend-symbol">BTC</span>
                            <span class="legend-amount">$1,396,453</span>
                        </div>
                        <span class="legend-pct">18.9%</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-left">
                            <div class="legend-color" style="background: #C2A633;"></div>
                            <span class="legend-symbol">DOGE</span>
                            <span class="legend-amount">$778,883</span>
                        </div>
                        <span class="legend-pct">10.5%</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-left">
                            <div class="legend-color" style="background: #FF007A;"></div>
                            <span class="legend-symbol">UNI</span>
                            <span class="legend-amount">$560,397</span>
                        </div>
                        <span class="legend-pct">7.6%</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-left">
                            <div class="legend-color" style="background: #2775CA;"></div>
                            <span class="legend-symbol">USDC</span>
                            <span class="legend-amount">$44,284</span>
                        </div>
                        <span class="legend-pct">0.6%</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-left">
                            <div class="legend-color" style="background: #26A17B;"></div>
                            <span class="legend-symbol">USDT</span>
                            <span class="legend-amount">$977</span>
                        </div>
                        <span class="legend-pct">0.01%</span>
                    </div>
                </div>
            </div>

            <!-- Simulated Asset Pool -->
            <div class="chart-section">
                <h2>Simulated Asset Pool</h2>
                <div class="total-assets-display">Optimized Allocation</div>
                <div class="chart-container">
                    <canvas id="simulatedChart"></canvas>
                </div>
                <div class="allocation-legend">
                    <div class="legend-item">
                        <div class="legend-left">
                            <div class="legend-color" style="background: #1a2b5f;"></div>
                            <span class="legend-symbol">EOS</span>
                            <span class="legend-apr">48.36% APR</span>
                        </div>
                        <span class="legend-pct">50%</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-left">
                            <div class="legend-color" style="background: #2c4a8c;"></div>
                            <span class="legend-symbol">MATIC</span>
                            <span class="legend-apr">16.73% APR</span>
                        </div>
                        <span class="legend-pct">15%</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-left">
                            <div class="legend-color" style="background: #5BA4E6;"></div>
                            <span class="legend-symbol">FTM</span>
                            <span class="legend-apr">10.98% APR</span>
                        </div>
                        <span class="legend-pct">15%</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-left">
                            <div class="legend-color" style="background: #2D8A5F;"></div>
                            <span class="legend-symbol">RUNE</span>
                            <span class="legend-apr">9.84% APR</span>
                        </div>
                        <span class="legend-pct">10%</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-left">
                            <div class="legend-color" style="background: #7b9ec9;"></div>
                            <span class="legend-symbol">CHZ</span>
                            <span class="legend-apr">9.61% APR</span>
                        </div>
                        <span class="legend-pct">10%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Asset List Section -->
        <div class="assets-section" style="margin-bottom: 40px;">
                <h2>Total Asset Pool <span style="color: var(--text-secondary); font-weight: 400;">(39 assets)</span></h2>
                <div class="assets-grid-small">
                    <div class="asset-card-small"><div class="asset-symbol-small">BTC</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">ETH</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">SOL</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">BNB</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">XRP</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">ADA</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">DOGE</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">AVAX</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">DOT</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">LINK</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">LTC</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">BCH</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">NEAR</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">UNI</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">SUI</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">APT</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">ATOM</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">OP</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">FIL</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">XLM</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">TRX</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">AAVE</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">ETC</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">ALGO</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">FTM</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">THETA</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">EOS</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">EGLD</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">SAND</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">MANA</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">AXS</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">ENS</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">GMT</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">CHZ</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">RUNE</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">WLD</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">WIF</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">MATIC</div></div>
                    <div class="asset-card-small"><div class="asset-symbol-small">DOGS</div></div>
                </div>
            </div>
        </div>

        <div class="table-container">
            <div class="table-header">
                <h2>Asset Monitor</h2>
                <span style="color: var(--text-secondary); font-size: 0.85rem;">Last updated: Dec 13, 2025</span>
            </div>
            <div class="table-scroll" style="max-height: 800px;">
                <table>
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Symbol</th>
                            <th>Market Cap</th>
                            <th>24h Volume</th>
                            <th>FDV</th>
                            <th>Allocation %</th>
                            <th>APR Score</th>
                            <th>Expected APY</th>
                            <th>3-Day Funding</th>
                            <th>7-Day Funding</th>
                            <th>30-Day Funding</th>
                            <th>Next Funding</th>
                            <th>Prev Funding</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td class="asset-index">1</td><td><strong>EOS</strong></td><td>$109M</td><td>$13K</td><td>$369M</td><td>50%</td><td class="positive">48.36%</td><td class="positive">48.36%</td><td class="positive">52.27%</td><td class="positive">28.57%</td><td class="positive">12.29%</td><td class="positive">10.80%</td><td class="positive">153.59%</td></tr>
                        <tr><td class="asset-index">2</td><td><strong>MATIC</strong></td><td>$1.3B</td><td>$38M</td><td>$1.3B</td><td>15%</td><td class="positive">16.73%</td><td class="positive">16.73%</td><td class="positive">15.81%</td><td class="positive">12.81%</td><td class="positive">6.08%</td><td class="positive">10.80%</td><td class="positive">40.79%</td></tr>
                        <tr><td class="asset-index">3</td><td><strong>FTM</strong></td><td>$344M</td><td>$28M</td><td>$353M</td><td>15%</td><td class="positive">10.98%</td><td class="positive">10.98%</td><td class="positive">10.80%</td><td class="positive">10.96%</td><td class="positive">12.31%</td><td class="positive">10.80%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">4</td><td><strong>RUNE</strong></td><td>$228M</td><td>$202M</td><td>$275M</td><td>10%</td><td class="positive">9.84%</td><td class="positive">9.84%</td><td class="positive">10.80%</td><td class="positive">8.15%</td><td class="positive">6.46%</td><td class="positive">10.80%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">5</td><td><strong>CHZ</strong></td><td>$339M</td><td>$47M</td><td>$339M</td><td>10%</td><td class="positive">9.61%</td><td class="positive">9.61%</td><td class="positive">11.23%</td><td class="positive">6.95%</td><td class="positive">5.37%</td><td class="positive">10.80%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">6</td><td><strong>ETC</strong></td><td>$2.0B</td><td>$31M</td><td>$2.0B</td><td>0%</td><td class="positive">9.35%</td><td class="positive">9.35%</td><td class="positive">7.70%</td><td class="positive">8.71%</td><td class="positive">9.72%</td><td class="positive">10.80%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">7</td><td><strong>WLD</strong></td><td>$1.5B</td><td>$60M</td><td>$5.9B</td><td>0%</td><td class="positive">8.80%</td><td class="positive">8.80%</td><td class="positive">10.52%</td><td class="positive">4.50%</td><td class="positive">4.19%</td><td class="positive">10.80%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">8</td><td><strong>ALGO</strong></td><td>$1.1B</td><td>$29M</td><td>$1.1B</td><td>0%</td><td class="positive">8.32%</td><td class="positive">8.32%</td><td class="positive">6.28%</td><td class="positive">7.06%</td><td class="positive">7.09%</td><td class="positive">10.80%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">9</td><td><strong>UNI</strong></td><td>$3.4B</td><td>$148M</td><td>$5.5B</td><td>0%</td><td class="positive">8.08%</td><td class="positive">8.08%</td><td class="positive">7.35%</td><td class="positive">5.46%</td><td class="positive">4.67%</td><td class="positive">10.80%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">10</td><td><strong>LINK</strong></td><td>$9.5B</td><td>$327M</td><td>$13.7B</td><td>0%</td><td class="positive">7.87%</td><td class="positive">7.87%</td><td class="positive">7.46%</td><td class="positive">3.99%</td><td class="positive">5.13%</td><td class="positive">10.80%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">11</td><td><strong>SUI</strong></td><td>$6.0B</td><td>$398M</td><td>$16.0B</td><td>0%</td><td class="positive">6.51%</td><td class="positive">6.51%</td><td class="positive">4.88%</td><td class="positive">4.63%</td><td class="positive">5.29%</td><td class="positive">9.16%</td><td class="positive">8.66%</td></tr>
                        <tr><td class="asset-index">12</td><td><strong>WIF</strong></td><td>$396M</td><td>$107M</td><td>$396M</td><td>0%</td><td class="positive">6.46%</td><td class="positive">6.46%</td><td class="positive">4.02%</td><td class="positive">6.07%</td><td class="positive">1.42%</td><td class="positive">9.12%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">13</td><td><strong>FIL</strong></td><td>$976M</td><td>$71M</td><td>$2.6B</td><td>0%</td><td class="positive">6.09%</td><td class="positive">6.09%</td><td class="negative">-0.26%</td><td class="positive">5.55%</td><td class="positive">8.43%</td><td class="positive">10.80%</td><td class="positive">10.07%</td></tr>
                        <tr><td class="asset-index">14</td><td><strong>ENS</strong></td><td>$415M</td><td>$12M</td><td>$1.1B</td><td>0%</td><td class="positive">6.04%</td><td class="positive">6.04%</td><td class="positive">10.61%</td><td class="positive">1.96%</td><td class="negative">-3.41%</td><td class="positive">4.76%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">15</td><td><strong>LTC</strong></td><td>$6.2B</td><td>$294M</td><td>$6.2B</td><td>0%</td><td class="positive">5.95%</td><td class="positive">5.95%</td><td class="positive">3.50%</td><td class="positive">3.03%</td><td class="positive">6.14%</td><td class="positive">8.24%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">16</td><td><strong>XLM</strong></td><td>$7.7B</td><td>$66M</td><td>$11.9B</td><td>0%</td><td class="positive">4.97%</td><td class="positive">4.97%</td><td class="positive">3.15%</td><td class="positive">1.37%</td><td class="positive">0.79%</td><td class="positive">10.80%</td><td class="positive">6.45%</td></tr>
                        <tr><td class="asset-index">17</td><td><strong>ADA</strong></td><td>$15.0B</td><td>$365M</td><td>$18.4B</td><td>0%</td><td class="positive">4.93%</td><td class="positive">4.93%</td><td class="positive">1.52%</td><td class="positive">2.76%</td><td class="positive">3.77%</td><td class="positive">10.80%</td><td class="positive">5.66%</td></tr>
                        <tr><td class="asset-index">18</td><td><strong>NEAR</strong></td><td>$2.1B</td><td>$106M</td><td>$2.1B</td><td>0%</td><td class="positive">3.60%</td><td class="positive">3.60%</td><td class="positive">4.03%</td><td class="positive">7.38%</td><td class="positive">4.73%</td><td class="negative">-1.82%</td><td class="positive">5.98%</td></tr>
                        <tr><td class="asset-index">19</td><td><strong>MANA</strong></td><td>$278M</td><td>$16M</td><td>$318M</td><td>0%</td><td class="positive">2.26%</td><td class="positive">2.26%</td><td class="negative">-2.82%</td><td class="negative">-5.91%</td><td class="negative">-0.27%</td><td class="positive">10.80%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">20</td><td><strong>SOL</strong></td><td>$74.5B</td><td>$2.3B</td><td>$81.7B</td><td>0%</td><td class="positive">2.08%</td><td class="positive">2.08%</td><td class="negative">-1.83%</td><td class="negative">-0.59%</td><td class="positive">0.74%</td><td class="negative">-7.75%</td><td class="negative">-7.35%</td></tr>
                        <tr><td class="asset-index">21</td><td><strong>BTC</strong></td><td>$1.8T</td><td>$35.3B</td><td>$1.8T</td><td>0%</td><td class="positive">2.01%</td><td class="positive">2.01%</td><td class="positive">0.74%</td><td class="negative">-0.08%</td><td class="positive">1.91%</td><td class="positive">7.52%</td><td class="negative">-1.77%</td></tr>
                        <tr><td class="asset-index">22</td><td><strong>XRP</strong></td><td>$121.8B</td><td>$1.7B</td><td>$201.9B</td><td>0%</td><td class="positive">1.84%</td><td class="positive">1.84%</td><td class="negative">-0.28%</td><td class="positive">0.13%</td><td class="positive">1.75%</td><td class="positive">7.37%</td><td class="negative">-0.81%</td></tr>
                        <tr><td class="asset-index">23</td><td><strong>AAVE</strong></td><td>$3.0B</td><td>$238M</td><td>$3.2B</td><td>0%</td><td class="positive">1.55%</td><td class="positive">1.55%</td><td class="positive">3.03%</td><td class="positive">1.42%</td><td class="positive">7.75%</td><td class="negative">-3.90%</td><td class="positive">3.68%</td></tr>
                        <tr><td class="asset-index">24</td><td><strong>TRX</strong></td><td>$25.7B</td><td>$406M</td><td>$25.7B</td><td>0%</td><td class="positive">1.13%</td><td class="positive">1.13%</td><td class="positive">4.21%</td><td class="negative">-1.19%</td><td class="positive">1.86%</td><td class="negative">-4.24%</td><td class="positive">6.54%</td></tr>
                        <tr><td class="asset-index">25</td><td><strong>THETA</strong></td><td>$355M</td><td>$13M</td><td>$355M</td><td>0%</td><td class="positive">0.95%</td><td class="positive">0.95%</td><td class="positive">1.21%</td><td class="positive">2.49%</td><td class="negative">-6.93%</td><td class="positive">10.80%</td><td class="negative">-12.82%</td></tr>
                        <tr><td class="asset-index">26</td><td><strong>AXS</strong></td><td>$168M</td><td>$11M</td><td>$271M</td><td>0%</td><td class="positive">0.74%</td><td class="positive">0.74%</td><td class="negative">-6.37%</td><td class="positive">3.20%</td><td class="negative">-23.04%</td><td class="positive">10.80%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">27</td><td><strong>SAND</strong></td><td>$346M</td><td>$16M</td><td>$398M</td><td>0%</td><td class="positive">0.35%</td><td class="positive">0.35%</td><td class="positive">8.45%</td><td class="positive">6.15%</td><td class="positive">6.99%</td><td class="negative">-20.49%</td><td class="positive">6.73%</td></tr>
                        <tr><td class="asset-index">28</td><td><strong>BNB</strong></td><td>$123.2B</td><td>$906M</td><td>$123.2B</td><td>0%</td><td class="positive">0.27%</td><td class="positive">0.27%</td><td>0.00%</td><td>0.00%</td><td class="positive">2.72%</td><td>0.00%</td><td>0.00%</td></tr>
                        <tr><td class="asset-index">29</td><td><strong>DOGE</strong></td><td>$23.3B</td><td>$550M</td><td>$23.3B</td><td>0%</td><td class="positive">0.10%</td><td class="positive">0.10%</td><td class="positive">1.89%</td><td class="positive">3.77%</td><td class="positive">1.60%</td><td class="negative">-5.88%</td><td class="positive">0.58%</td></tr>
                        <tr><td class="asset-index">30</td><td><strong>ETH</strong></td><td>$375.2B</td><td>$10.0B</td><td>$375.2B</td><td>0%</td><td class="negative">-0.16%</td><td class="negative">-0.16%</td><td class="negative">-0.87%</td><td class="positive">1.95%</td><td class="positive">3.99%</td><td class="positive">1.99%</td><td class="negative">-7.86%</td></tr>
                        <tr><td class="asset-index">31</td><td><strong>GMT</strong></td><td>$51M</td><td>$12M</td><td>$82M</td><td>0%</td><td class="negative">-2.36%</td><td class="negative">-2.36%</td><td class="positive">6.64%</td><td class="negative">-8.67%</td><td class="negative">-13.23%</td><td class="positive">10.80%</td><td class="negative">-26.66%</td></tr>
                        <tr><td class="asset-index">32</td><td><strong>AVAX</strong></td><td>$5.7B</td><td>$229M</td><td>$6.1B</td><td>0%</td><td class="negative">-2.83%</td><td class="negative">-2.83%</td><td class="negative">-9.38%</td><td class="negative">-1.92%</td><td class="negative">-7.60%</td><td class="positive">0.46%</td><td class="positive">6.71%</td></tr>
                        <tr><td class="asset-index">33</td><td><strong>OP</strong></td><td>$613M</td><td>$47M</td><td>$1.4B</td><td>0%</td><td class="negative">-5.45%</td><td class="negative">-5.45%</td><td class="positive">5.86%</td><td class="negative">-2.03%</td><td class="negative">-5.13%</td><td class="negative">-27.98%</td><td class="positive">4.69%</td></tr>
                        <tr><td class="asset-index">34</td><td><strong>ATOM</strong></td><td>$1.0B</td><td>$25M</td><td>$1.0B</td><td>0%</td><td class="negative">-6.02%</td><td class="negative">-6.02%</td><td class="negative">-11.80%</td><td class="negative">-12.50%</td><td class="negative">-14.99%</td><td class="positive">4.45%</td><td class="positive">2.73%</td></tr>
                        <tr><td class="asset-index">35</td><td><strong>DOT</strong></td><td>$3.3B</td><td>$104M</td><td>$3.3B</td><td>0%</td><td class="negative">-6.17%</td><td class="negative">-6.17%</td><td class="negative">-6.26%</td><td class="negative">-3.05%</td><td class="negative">-4.57%</td><td class="negative">-15.38%</td><td class="positive">4.16%</td></tr>
                        <tr><td class="asset-index">36</td><td><strong>BCH</strong></td><td>$11.5B</td><td>$188M</td><td>$11.5B</td><td>0%</td><td class="negative">-12.94%</td><td class="negative">-12.94%</td><td class="negative">-9.72%</td><td class="negative">-10.53%</td><td class="negative">-1.50%</td><td class="negative">-12.48%</td><td class="negative">-30.98%</td></tr>
                        <tr><td class="asset-index">37</td><td><strong>APT</strong></td><td>$1.3B</td><td>$177M</td><td>$2.0B</td><td>0%</td><td class="negative">-13.26%</td><td class="negative">-13.26%</td><td class="positive">0.19%</td><td class="negative">-3.25%</td><td class="negative">-14.72%</td><td class="negative">-51.27%</td><td class="positive">10.80%</td></tr>
                        <tr><td class="asset-index">38</td><td><strong>EGLD</strong></td><td>$215M</td><td>$9M</td><td>$215M</td><td>0%</td><td class="negative">-14.36%</td><td class="negative">-14.36%</td><td class="negative">-14.38%</td><td class="negative">-41.10%</td><td class="negative">-31.38%</td><td class="positive">10.80%</td><td class="negative">-9.29%</td></tr>
                        <tr><td class="asset-index">39</td><td><strong>DOGS</strong></td><td>$26M</td><td>$7M</td><td>$27M</td><td>0%</td><td class="negative">-102.60%</td><td class="negative">-102.60%</td><td class="negative">-111.88%</td><td class="negative">-143.52%</td><td class="negative">-46.54%</td><td class="positive">10.80%</td><td class="negative">-255.83%</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Custom plugin factory for outer labels with connector lines (with overlap prevention)
        function createOuterLabelsPlugin(labels, percentages) {
            return {
                id: 'outerLabels_' + Math.random(),
                afterDraw(chart) {
                    const ctx = chart.ctx;
                    const meta = chart.getDatasetMeta(0);
                    const centerX = (chart.chartArea.left + chart.chartArea.right) / 2;
                    const centerY = (chart.chartArea.top + chart.chartArea.bottom) / 2;

                    // Collect label positions first to detect overlaps
                    const labelPositions = [];

                    meta.data.forEach((arc, index) => {
                        if (index >= labels.length) return;

                        // Skip very small segments (< 1%) - they're shown in the legend
                        const segmentAngle = arc.endAngle - arc.startAngle;
                        if (segmentAngle < 0.05) return;

                        const angle = (arc.startAngle + arc.endAngle) / 2;
                        const outerRadius = arc.outerRadius;

                        const midX = centerX + Math.cos(angle) * (outerRadius + 15);
                        let midY = centerY + Math.sin(angle) * (outerRadius + 15);

                        // Check for overlap with previous labels and adjust
                        for (let prev of labelPositions) {
                            if (Math.abs(midY - prev.y) < 14 && Math.abs(midX - prev.x) < 60) {
                                midY = prev.y + (midY > prev.y ? 16 : -16);
                            }
                        }

                        labelPositions.push({ x: midX, y: midY, angle, index });
                    });

                    // Draw labels with adjusted positions
                    labelPositions.forEach(({ x: midX, y: midY, angle, index }) => {
                        const arc = meta.data[index];
                        const outerRadius = arc.outerRadius;

                        const edgeX = centerX + Math.cos(angle) * outerRadius;
                        const edgeY = centerY + Math.sin(angle) * outerRadius;

                        const isLeft = angle > Math.PI / 2 && angle < 3 * Math.PI / 2;
                        const endX = isLeft ? midX - 25 : midX + 25;

                        ctx.save();
                        ctx.strokeStyle = '#5a6577';
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(edgeX, edgeY);
                        ctx.lineTo(midX, midY);
                        ctx.lineTo(endX, midY);
                        ctx.stroke();

                        ctx.fillStyle = '#1a2b5f';
                        ctx.font = 'bold 11px "Playfair Display", Georgia, serif';
                        ctx.textAlign = isLeft ? 'right' : 'left';
                        ctx.textBaseline = 'middle';
                        const textX = isLeft ? endX - 4 : endX + 4;
                        ctx.fillText(labels[index] + ' ' + percentages[index], textX, midY);
                        ctx.restore();
                    });
                }
            };
        }

        // Current Asset Pool Chart
        const currentCtx = document.getElementById('currentChart').getContext('2d');
        new Chart(currentCtx, {
            type: 'doughnut',
            data: {
                labels: ['SOL $4.6M', 'BTC $1.4M', 'DOGE $779K', 'UNI $560K', 'USDC $44K', 'USDT $977'],
                datasets: [{
                    data: [62.4, 18.9, 10.5, 7.6, 0.6, 0.01],
                    backgroundColor: [
                        '#9945FF',
                        '#F7931A',
                        '#C2A633',
                        '#FF007A',
                        '#2775CA',
                        '#26A17B'
                    ],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '50%',
                layout: {
                    padding: { top: 35, bottom: 35, left: 70, right: 70 }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed + '%';
                            }
                        }
                    }
                }
            },
            plugins: [createOuterLabelsPlugin(
                ['SOL', 'BTC', 'DOGE', 'UNI', 'USDC', 'USDT'],
                ['62.4%', '18.9%', '10.5%', '7.6%', '0.6%', '0.01%']
            )]
        });

        // Simulated Asset Pool Chart
        const simulatedCtx = document.getElementById('simulatedChart').getContext('2d');
        new Chart(simulatedCtx, {
            type: 'doughnut',
            data: {
                labels: ['EOS 48.36% APR', 'MATIC 16.73% APR', 'FTM 10.98% APR', 'RUNE 9.84% APR', 'CHZ 9.61% APR'],
                datasets: [{
                    data: [50, 15, 15, 10, 10],
                    backgroundColor: [
                        '#1a2b5f',
                        '#2c4a8c',
                        '#5BA4E6',
                        '#2D8A5F',
                        '#7b9ec9'
                    ],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '50%',
                layout: {
                    padding: { top: 35, bottom: 35, left: 70, right: 70 }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed + '%';
                            }
                        }
                    }
                }
            },
            plugins: [createOuterLabelsPlugin(
                ['EOS', 'MATIC', 'FTM', 'RUNE', 'CHZ'],
                ['50%', '15%', '15%', '10%', '10%']
            )]
        });
    </script>
</body>
</html>
